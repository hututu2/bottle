<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小瓶子</title>
    <link rel="stylesheet" href="bootstrap-grid-system.css">
    <style>
        h2,
        p {
            text-align: center;
        }
        
        bimg {
            width: 100%;
            height: 100%;
        }
        
        #btext {
            text-align: center;
        }
    </style>
</head>

<body>
    <h2>今天来点什么小瓶子呢？</h2>
    <div id="control" class="">
        <p><input type="text" name="theme" id="theme"><label for="text">小瓶子</label>
            <button onclick="change_theme()">修改主题</button></p>
        <p>添加小瓶子后点击小瓶子的名称可修改名称。╰(●’◡’●)╮点击小瓶子可变换瓶子中的糖果。</p>
        <p>点击删除小瓶子会删除最后一个小瓶子。</p>
        <p><button id="add" onclick="add_a_bottle()">添加一个小瓶子</button><button id="delete" onclick="remove_a_bottle()">删除一个小瓶子</button></p>
    </div>
    <hr width="50%">
    <h2 id="the_theme">______小瓶子</h2>
    <div id="bottle" class="row container-fluid" style=" padding-right: 20%;
    padding-left: 20%;"></div>

</body>
<script>
    var bottle_sum = 0;

    function change_theme() {
        var theme = document.getElementById("theme").value;
        document.getElementById("the_theme").innerHTML = theme + "小瓶子";
    }

    function add_a_bottle() {
        var text = prompt("这是个什么瓶子呢？", "_____");
        //创建块
        bottle_sum = bottle_sum + 1;
        var div = document.createElement("div");
        div.setAttribute("class", "col-sm-6 col-md-4 col-lg-3 col-xl-2"); //设置class
        div.setAttribute("id", "img" + bottle_sum);
        //创建图片
        var img = document.createElement("img");
        img.setAttribute("id", "bimg" + bottle_sum); //设置id
        img.setAttribute("class", "col-12"); //设置class
        img.setAttribute("data-level", "0"); //设置图片记录
        img.setAttribute("src", "b0.png"); //设置链接
        img.setAttribute("onclick", "thisimg=this;change_img(thisimg)"); //点击更换图片动作
        div.appendChild(img); //图片插入
        //创建文本p
        var p = document.createElement("p");
        var p_text = document.createTextNode(text);
        p.appendChild(p_text);
        p.setAttribute("id", "p_text"); //设置id
        div.appendChild(p);
        p.setAttribute("onclick", "this.innerHTML = prompt('换个什么好呢？',this.firstChild.nodeValue);"); //增加修改名称动作
        var bottle = document.getElementById("bottle");
        bottle.appendChild(div);
    }

    function remove_a_bottle() {
        var last_bottle_id = "img" + bottle_sum;
        var child = document.getElementById(last_bottle_id);
        var father = document.getElementById("bottle");
        father.removeChild(child);
        bottle_sum = bottle_sum - 1;
    }


    function change_img(thisimg) {
        var nowlevel = parseInt(thisimg.getAttribute('data-level'));
        var newlevel = nowlevel + 1;
        newlevel = newlevel % 6;
        thisimg.src = "b" + newlevel + ".png";
        thisimg.setAttribute('data-level', newlevel);
    }
</script>

</html>